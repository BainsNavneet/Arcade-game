"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var livesText1=document.querySelector(".lives1"),livesText2=document.querySelector(".lives2"),livesText3=document.querySelector(".lives3"),heartArr=[livesText1,livesText2,livesText3],levelsText=document.querySelector(".levels"),Enemy=function(){function r(e,t,n){_classCallCheck(this,r),this.x=e,this.y=t,this.speed=n,this.sprite="images/enemy-bug.png"}return _createClass(r,[{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"update",value:function(e){this.x+=this.speed*e*player.levels*.5,500<this.x&&(this.x=-80),player.x>this.x-50&&player.x<this.x+50&&player.y>this.y-50&&player.y<this.y+50&&(player.x=200,player.y=400,player.lives<2?(player.x=200,player.y=400,player.levels=1,player.lives=3,heartArr.forEach(function(e){e.innerHTML='<img src="./images/Heart.png">'}),player.heartCount=0,levelsText.innerHTML=1,Swal.fire({title:"OOPS",text:"You are dead. Be carefull!! Play again",type:"warning"})):(player.lives=player.lives-1,heartArr[player.heartCount].innerHTML="",player.heartCount=player.heartCount+1))}}]),r}(),Player=function(){function n(e,t){_classCallCheck(this,n),this.sprite="images/char-boy.png",this.x=e,this.y=t,this.levels=Number(document.querySelector(".levels").innerHTML),this.lives=heartArr.length,this.heartCount=0}return _createClass(n,[{key:"update",value:function(){player.y<10&&(3==this.levels?(Swal.fire({title:"HURRRAAHH",text:"You win this game!",type:"success"}),this.x=200,this.y=400,this.levels=1,this.lives=heartArr.length,heartArr.forEach(function(e){e.innerHTML='<img src="./images/Heart.png">'}),this.heartCount=0,levelsText.innerHTML=1):(this.levels=this.levels+1,levelsText.innerHTML=this.levels,this.x=200,this.y=400))}},{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"handleInput",value:function(e){"left"==e&&0<this.x&&(this.x=this.x-50),"up"==e&&0<this.y&&(this.y=this.y-35),"right"==e&&this.x<370&&(this.x=this.x+35),"down"==e&&this.y<370&&(this.y=this.y+40)}}]),n}(),enemy1=new Enemy(250,60,300),enemy2=new Enemy(200,150,200),enemy3=new Enemy(200,230,250),allEnemies=[enemy1,enemy2,enemy3],player=new Player(200,400);document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Engine=function(e){var t,n=e.document,r=e.window,i=n.createElement("canvas"),s=i.getContext("2d");function a(){var e=Date.now();!function(e){!function(t){allEnemies.forEach(function(e){e.update(t)}),player.update()}(e)}((e-t)/1e3),function(){var e,t,n=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"];for(s.clearRect(0,0,i.width,i.height),e=0;e<6;e++)for(t=0;t<5;t++)s.drawImage(Resources.get(n[e]),101*t,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),t=e,r.requestAnimationFrame(a)}i.width=505,i.height=606,n.body.appendChild(i),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png"]),Resources.onReady(function(){t=Date.now(),a()}),e.ctx=s}(void 0);!function(){var n={},r=[];function t(e){if(n[e])return n[e];var t=new Image;t.onload=function(){n[e]=t,i()&&r.forEach(function(e){e()})},n[e]=!1,t.src=e}function i(){var e=!0;for(var t in n)n.hasOwnProperty(t)&&!n[t]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){t(e)}):t(e)},get:function(e){return n[e]},onReady:function(e){r.push(e)},isReady:i}}();